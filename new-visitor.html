<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Dashboard</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
  </head>
  <style>
    #signUpForm .form-header {
      gap: 5px;
      text-align: center;
      font-size: 0.9em;
    }
    #signUpForm .form-header .stepIndicator {
      position: relative;
      flex: 5;
      padding-bottom: 30px;
    }
    #signUpForm .form-header .stepIndicator.active {
      font-weight: 600;
    }
    #signUpForm .form-header .stepIndicator.finish {
      font-weight: 600;
      color: #0a58ca;
    }
    #signUpForm .form-header .stepIndicator::before {
      content: "";
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      z-index: 9;
      width: 20px;
      height: 20px;
      background-color: #87b4f7;
      border-radius: 50%;
      border: 3px solid #c5d9f8;
    }
    #signUpForm .form-header .stepIndicator.active::before {
      background-color: #87b4f7;
      border: 3px solid #c5d9f8;
      animation: zoom-in-zoom-out 1s ease infinite;
    }
    @keyframes zoom-in-zoom-out {
      0% {
        transform: scale(1, 1);
      }
      50% {
        transform: scale(1.5, 1.5);
      }
      100% {
        transform: scale(1, 1);
      }
    }
    #signUpForm .form-header .stepIndicator.finish::before {
      background-color: #0d6efd;
      border: 3px solid #87b4f7;
    }
    #signUpForm .form-header .stepIndicator::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: 8px;
      width: 100%;
      height: 3px;
      background-color: #f3f3f3;
    }
    #signUpForm .form-header .stepIndicator.active::after {
      background-color: #87b4f7;
    }
    #signUpForm .form-header .stepIndicator.finish::after {
      background-color: #0d6efd;
    }
    #signUpForm .form-header .stepIndicator:last-child:after {
      display: none;
    }

    #signUpForm .step {
      display: none;
    }

    .uppercase {
      text-transform: uppercase;
    }

    @page {
      size: landscape;
      margin: 7%;
    }

    @media print {
      #ExtralargeModal {
        display: block !important;
      }

      #mainContain {
        display: none !important;
      }
    }
  </style>
  <body>
    <main class="main" id="mainContain" style="margin: 10px">
      <div class="pagetitle">
        <h1 style="display: inline-block">Visitor's Details</h1>
        <button type="button" id="btnClose" class="btn" style="float: right">
          <i class="bi bi-x-square"></i>
        </button>
      </div>
      <!-- End Page Title -->
      <section class="section">
        <div class="row">
          <div id="signUpForm">
            <!-- start step indicators -->
            <div id="indicator" class="card">
              <div class="card-body" style="padding: 20px 20px 0px 20px">
                <div class="form-header d-flex mb-4">
                  <span class="stepIndicator active">Visitor's Details</span>
                  <span class="stepIndicator">Visiting Details</span>
                  <span class="stepIndicator">Print Visiting Pass</span>
                </div>
              </div>
            </div>

            <!-- end step indicators -->

            <!-- step one -->

            <div class="step" style="display: block">
              <div class="row">
                <div class="col-lg-8">
                  <div class="card">
                    <div class="card-body">
                      <form
                        id="visitor-details"
                        class="needs-validation"
                        novalidate
                      >
                        <h5 class="card-title">Visitor's Details</h5>
                        <div class="row g-2">
                          <div class="col-md-3">
                            <label for="contactnumber" class="form-label"
                              >Contact Number</label
                            >
                            <input
                              type="number"
                              class="form-control"
                              id="contactnumber"
                              maxlength="10"
                              minlength="10"
                              onblur="getVisitorDetails(this);"
                              required
                            />
                            <input type="hidden" id="visitorId" value="" />
                          </div>
                          <div class="col-md-3">
                            <label for="IDProof" class="form-label"
                              >ID Proof</label
                            >
                            <select
                              id="IDProof"
                              class="form-select"
                              required
                            ></select>
                          </div>
                          <div class="col-md-3">
                            <label for="id-number" class="form-label"
                              >ID Number</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="id-number"
                              required
                            />
                          </div>
                          <div class="col-md-3">
                            <label for="VisitorCategory" class="form-label"
                              >Vistor Category</label
                            >
                            <select
                              id="VisitorCategory"
                              class="form-select"
                              required
                            >
                              <option>General Public</option>
                            </select>
                          </div>
                          <div class="col-md-5">
                            <label for="name" class="form-label">Name</label>
                            <input
                              type="text"
                              class="form-control"
                              id="name"
                              required
                            />
                          </div>

                          <div class="col-md-5">
                            <label for="fname" class="form-label"
                              >Father's Name</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="fname"
                            />
                          </div>
                          <div class="col-md-2">
                            <label for="age" class="form-label">Age</label>
                            <input type="text" class="form-control" id="age" />
                          </div>
                          <div class="col-md-6">
                            <label for="organization" class="form-label"
                              >Organization Name</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="organization"
                            />
                          </div>
                          <div class="col-md-6">
                            <label for="address" class="form-label"
                              >Address</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="address"
                              required
                            />
                          </div>
                          <div class="col-md-4">
                            <label for="city" class="form-label">City</label>
                            <input
                              type="text"
                              class="form-control"
                              id="city"
                              required
                            />
                          </div>

                          <div class="col-md-4">
                            <label for="district" class="form-label"
                              >District</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="district"
                            />
                          </div>

                          <div class="col-md-4">
                            <label for="States" class="form-label">State</label>
                            <select id="States" class="form-select" required>
                              <option></option>
                            </select>
                          </div>
                          <div class="text-center">
                            <button
                              type="button"
                              class="btn btn-info"
                              onclick="saveVisitor()"
                            >
                              <i class="bi bi-save2 me-1"></i> Draft
                            </button>

                            <button
                              type="button"
                              class="btn btn btn-danger"
                              id="btnCancel"
                            >
                              <i class="bi bi-x-circle me-1"></i> Cancel
                            </button>
                            <button
                              type="button"
                              class="btn btn-primary"
                              id="btnAdd"
                              onclick="next(1, 'visitor-details')"
                            >
                              Next <i class="bi bi-arrow-right-circle me-1"></i>
                            </button>

                            <!-- Warning Modal start -->
                            <div
                              class="modal fade"
                              id="messageModal"
                              tabindex="-1"
                              aria-hidden="true"
                              style="display: none"
                            >
                              <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                  <div class="modal-header"></div>
                                  <div class="modal-body">
                                    <i class="bi bi-check-circle me-1"></i>

                                    This information has been saved
                                    successfully.
                                  </div>
                                  <div
                                    class="modal-footer d-flex justify-content-center"
                                  >
                                    <button
                                      type="button"
                                      class="btn btn-secondary"
                                      data-bs-dismiss="modal"
                                    >
                                      OK
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <!-- Warning Modal End -->
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <div class="col-lg-4">
                  <div class="card">
                    <div class="card-body" id="visitorPhoto">
                      <h5 class="card-title">Visitor's Photo</h5>
                      <div class="card-img-top">
                        <video
                          id="video"
                          style="
                            border: 2px solid black;
                            width: 304px;
                            height: 229px;
                          "
                        >
                          Video stream not available.
                        </video>
                        <img
                          id="photo"
                          alt="The screen capture will appear in this box."
                          style="
                            border: 2px solid black;
                            width: 304px;
                            height: 229px;
                            display: none;
                          "
                        />
                      </div>
                      <div class="text-center mt-2">
                        <button id="startbutton" class="btn btn-info">
                          <i class="bi bi-person-bounding-box me-1"></i>
                          <span>Capture Photo</span>
                        </button>
                      </div>
                      <canvas
                        data-is-captured="n"
                        id="canvas"
                        style="display: none"
                      ></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- step two -->
            <div class="step">
              <div class="row">
                <div class="col-lg-6">
                  <div class="card">
                    <div class="card-body">
                      <form
                        id="visiting-details"
                        class="needs-validation"
                        novalidate
                      >
                        <h5 class="card-title">Visiting's Details</h5>
                        <div class="row g-2">
                          <div class="col-md-12">
                            <label for="Departments" class="form-label"
                              >Departments/Section</label
                            >
                            <select
                              id="Departments"
                              class="form-select"
                              onchange="getWantedToMeet(this.value)"
                              required
                            >
                              <option></option>
                            </select>
                          </div>
                          <div class="col-md-6">
                            <label for="purpose" class="form-label"
                              >Purpose of Visit</label
                            >
                            <input
                              type="text"
                              class="form-control"
                              id="purpose"
                              required
                            />
                          </div>
                          <div class="col-md-6">
                            <label for="numperson" class="form-label"
                              >Number of Person</label
                            >
                            <input
                              type="number"
                              class="form-control"
                              id="numperson"
                              required
                            />
                          </div>

                          <div class="text-center">
                            <input type="hidden" id="staffId" value="" />
                            <input type="hidden" id="staffName" />
                            <input type="hidden" id="staffDesignation" />
                            <input type="hidden" id="staffPhonenumber" />
                            <button
                              type="button"
                              class="btn btn-primary"
                              onclick="prev(0)"
                            >
                              <i class="bi bi-arrow-left-circle me-1"></i>
                              Previous
                            </button>

                            <button
                              type="button"
                              class="btn btn btn-danger"
                              id="btnCancel"
                            >
                              <i class="bi bi-x-circle me-1"></i> Cancel
                            </button>
                            <button
                              type="button"
                              class="btn btn-primary"
                              id="btnAdd"
                              onclick="saveVisitingDetails(2,'visiting-details')"
                            >
                              Next <i class="bi bi-arrow-right-circle me-1"></i>
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="card">
                    <div class="card-body" id="wantedToMeetList">
                      <h5 class="card-title">Wanted to Meet</h5>

                      <div id="wantedToMeet" class="list-group">
                        <div
                          class="alert alert-info alert-dismissible fade show"
                          role="alert"
                        >
                          <i class="bi bi-info-circle me-1"></i>
                          Please select Department to get the details.
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="alert"
                            aria-label="Close"
                          ></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- step three -->
            <section
              id="printArea"
              class="section step"
              style="margin: 20px; display: none"
            >
              <div class="row" id="previewHeader">
                <b id="headerText" style="font-size: larger"></b>
              </div>

              <div class="row" id="previewBody">
                <table style="border-bottom: 1px dotted">
                  <tr>
                    <td style="width: 200px">Visitor Slip No</td>
                    <td>: <span id="printSlipNo">12345</span></td>
                    <td>Category: <span id="printVisitorCat">12345</span></td>
                    <td rowspan="2">
                      <img
                        id="printVisitorImg"
                        src="assets/img/default.png"
                        height="150"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td>Date</td>
                    <td>: <span id="printVisitingDate">01-02-2024</span></td>
                    <td>
                      Time :
                      <span id="printVisitingTime" class="uppercase"
                        >03:09 PM</span
                      >
                    </td>
                  </tr>
                </table>
                <table style="border-bottom: 1px dotted">
                  <tr>
                    <td style="width: 200px">Name</td>
                    <td style="width: 300px">
                      : <span class="uppercase" id="printVisitorName"></span>
                    </td>
                    <td>
                      Age : <span class="uppercase" id="printVisitorAge"></span>
                    </td>
                    <td>
                      Contact Number : <span id="printVisitorPhone"></span>
                    </td>
                  </tr>
                  <tr>
                    <td>Father's Name</td>
                    <td>
                      : <span id="printVisitorFname" class="uppercase"></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Address</td>
                    <td>
                      : <span id="printVisitorAddress" class="uppercase"></span
                      ><br /><span
                        class="uppercase"
                        id="printVisitorCity"
                      ></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>State</td>
                    <td>
                      : <span id="printVisitorState" class="uppercase"></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>District</td>
                    <td>
                      :
                      <span id="printVisitorDistrict" class="uppercase"></span>
                    </td>
                    <td>Full Signature of pass holder</td>
                    <td></td>
                  </tr>
                </table>

                <table style="border-bottom: 1px dotted">
                  <tr>
                    <td style="width: 200px">To Meet</td>
                    <td style="width: 300px">
                      : <span id="printVisitorToMeet" class="uppercase"></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Department</td>
                    <td>
                      :
                      <span id="printVisitorToMeetSec" class="uppercase"></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>Purpose Of Visite</td>
                    <td>
                      : <span id="printVisitorPurpose" class="uppercase"></span>
                    </td>
                    <td></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>No. Of Person</td>
                    <td>
                      :
                      <span id="printVisitorNoPerson" class="uppercase"></span>
                    </td>
                    <td>Signature of visited Officer/Official</td>
                    <td>&nbsp;</td>
                  </tr>
                </table>
                <table>
                  <tr>
                    <td id="footerText" style="font-size: small"></td>
                  </tr>
                </table>
              </div>
              <div class="text-center" id="printButton">
                <button
                  type="button"
                  class="btn btn-primary"
                  id="btnBack"
                  onclick="prev(1)"
                >
                  <i class="bi bi-arrow-left-circle me-1"></i> Previous
                </button>
                <button
                  type="button"
                  class="btn btn-info"
                  onclick="printPage()"
                >
                  <i class="bi bi-printer me-1"></i> Print
                </button>
              </div>
            </section>
          </div>
        </div>
      </section>
    </main>

    <div
      id="ExtralargeModal"
      class="modal-dialog modal-fullscreen"
      style="display: none"
    >
      <div class="modal-content">
        <div class="modal-body" style="padding: 5px">
          <div class="row text-center" id="printHeader"></div>
          <div class="row" id="printBody"></div>
        </div>
      </div>
    </div>

    <!-- Print Preview Modal start-->

    <!-- Vendor JS Files -->
    <script src="assets/vendor/jquery-3.7.1.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/idb.js"></script>

    <!-- Template Main JS File -->
    <script src="./new-visitor-renderer.js"></script>
  </body>
</html>
